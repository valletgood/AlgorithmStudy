# 탑

[백준 2493번: 탑](https://www.acmicpc.net/problem/2493)

## 문제 파악하기

N개의 탑이 일렬로 있을 때, 각 탑에서 왼쪽으로 레이저를 쏘면 **어떤 탑에 맞는지** 구하는 문제입니다.

### 규칙

- 레이저는 왼쪽으로만 발사
- 자신보다 높거나 같은 첫 번째 탑에 수신됨
- 수신하는 탑이 없으면 0

> [!NOTE]
> 왼쪽에서 자신보다 큰 가장 가까운 원소 찾기 → **단조 스택** 문제입니다!

## 풀이

**단조 감소 스택 (Monotonic Stack)** 으로 해결합니다.

### 핵심 아이디어

스택에 "아직 레이저를 받을 가능성이 있는 탑"의 인덱스만 유지합니다.

- 현재 탑보다 낮은 탑들은 pop (이후 탑들도 현재 탑에 막혀서 못 받음)
- 스택에 남은 top이 레이저를 수신하는 탑

### 1. 초기화

```javascript
const answer = Array(N).fill(0);
const stack = [];
```

### 2. 단조 스택으로 탐색

```javascript
for (let i = 0; i < N; i++) {
  while (stack.length && tops[stack[stack.length - 1]] <= tops[i]) {
    stack.pop();
  }
  answer[i] = stack.length ? stack[stack.length - 1] + 1 : 0;
  stack.push(i);
}
```

> [!TIP] > **스택 유지 원리**
>
> - 현재 탑보다 낮은 탑은 pop → 이후 탑의 레이저도 현재 탑에 막힘
> - 스택은 항상 **단조 감소** 상태 유지
> - 스택 top이 현재 탑의 레이저를 받는 탑

### 3. 결과 출력

```javascript
console.log(answer.join(" "));
```

## 동작 예시

```
탑 높이: [6, 9, 5, 7, 4]
인덱스:   0  1  2  3  4

i=0, 높이=6: 스택 비어있음 → answer[0]=0, 스택=[0]
i=1, 높이=9: tops[0]=6 < 9 → pop, 스택 비어있음 → answer[1]=0, 스택=[1]
i=2, 높이=5: tops[1]=9 > 5 → answer[2]=2, 스택=[1,2]
i=3, 높이=7: tops[2]=5 < 7 → pop, tops[1]=9 > 7 → answer[3]=2, 스택=[1,3]
i=4, 높이=4: tops[3]=7 > 4 → answer[4]=4, 스택=[1,3,4]

결과: [0, 0, 2, 2, 4]
```

## 핵심 정리

| 동작        | 조건                 | 의미                    |
| ----------- | -------------------- | ----------------------- |
| pop         | 스택 top ≤ 현재 높이 | 이후 탑들에게도 안 보임 |
| answer 기록 | 스택 top             | 레이저 수신 탑          |
| push        | 항상                 | 다음 탑들의 후보로 등록 |

### 왜 단조 스택인가?

- 낮은 탑은 높은 탑에 가려져서 이후 탑에게 의미 없음
- 스택에 단조 감소 순서로만 유지하면 O(N)에 해결

### 시간 복잡도

- 각 원소는 최대 한 번 push, 한 번 pop
- **O(N)**
