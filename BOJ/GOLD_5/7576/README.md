## 문제

https://www.acmicpc.net/problem/7576

### 문제 파악하기

위 문제는 백준 알고리즘 7576 토마토 문제이다.

해당 문제는 익은 토마토가 인접한 칸의 위치에 익지 않은 토마토가 있다면 하루 후 익게 되면서 전체 토마토를 익히는데 걸리는 시간을 구하는 문제다.

예를 들어 (0,0) 칸의 토마토가 익었다면 다음 날 (1,0) + (0,1) 칸의 토마토가 익게 되고,

(1,0), (0,1)를 기준으로 인접한 칸의 토마토가 있다면 해당 칸들도 익게 되는 문제이다.

> [!NOTE]
> 인접한 칸만 확인하기 때문에 하나의 경로를 깊게 탐색하는 것이 아니라 면적을 넓게 탐색해야겠다는 결론을 내렸다.
>
> 또한 익은 토마토의 영향을 받는 인접한 토마토들을 BFS 큐에 넣을 때, 각 좌표가 따로따로 반복문을 돌게 되면 하나의 좌표에서 시작하는 너비 탐색이 되어버린다. **처음부터 익은 토마토 좌표들을 모두 큐에 넣고 시작해야 한 번의 사이클(하루)에 영향을 받은 좌표들이 동시에 처리된다는 게 핵심 포인트!**

## 풀이

### 1. 초기 익은 토마토 위치 수집

```javascript
const tomatoPosition = [];
for (let i = 0; i < M; i++) {
  for (let j = 0; j < N; j++) {
    if (board[i][j] === 1) tomatoPosition.push(i, j);
  }
}
```

- 보드를 순회하면서 처음부터 익어있는 토마토(`board[i][j] === 1`)의 좌표를 모두 수집한다.
- 좌표를 `[x, y, x, y, ...]` 형태의 1차원 배열로 저장하여 메모리를 절약했다.

### 2. 동시 수행 BFS

```javascript
const bfs = (tArr) => {
  let q = [tArr]; // 하루 단위로 좌표 배열을 관리
  // ...
  while (head < q.length) {
    const positions = q[head++]; // 오늘 익은 토마토들
    const move = []; // 내일 익을 토마토들
    // ...
  }
};
```

> [!TIP] > **핵심 아이디어**: 큐에 좌표 하나씩이 아니라, **하루에 익는 토마토들의 좌표 배열**을 통째로 넣는다.
> 이렇게 하면 같은 날 익은 토마토들이 동시에 처리되어 정확한 날짜 계산이 가능하다.

### 3. 탐색 조건

```javascript
if (ny < 0 || nx < 0 || nx >= M || ny >= N) continue;  // 범위 초과
if (board[nx][ny] === -1) continue;  // 빈 칸 (-1)
if (!visited[nx][ny]) {  // 아직 방문하지 않은 토마토
  visited[nx][ny] = true;
  move.push(nx, ny);
}
```

- **범위 초과**: 보드 밖으로 나가는 좌표는 무시
- **빈 칸**: 토마토가 없는 칸(`-1`)은 건너뜀
- **미방문 토마토**: 아직 익지 않은 토마토만 다음 날 익을 대상으로 추가

### 4. 날짜 카운트

```javascript
if (move.length > 0) {
  q.push(move);
  days++;
}
```

- 새로 익을 토마토가 있을 때만 `days`를 증가시킨다.
- `move` 배열이 비어있으면 더 이상 익힐 토마토가 없다는 의미이므로 종료된다.

### 5. 결과 판별

```javascript
let possible = true;
outer: for (let i = 0; i < M; i++) {
  for (let j = 0; j < N; j++) {
    if (!visited[i][j] && board[i][j] !== -1) {
      possible = false;
      break outer;
    }
  }
}
console.log(possible ? days : -1);
```

- 모든 칸을 순회하며 방문하지 않은 토마토가 있는지 확인한다.
- 빈 칸(`-1`)이 아닌데 방문하지 않은 곳이 있다면 → 익을 수 없는 토마토가 존재 → `-1` 출력
- 모두 익었다면 → 걸린 날짜(`days`) 출력
