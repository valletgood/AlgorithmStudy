# 가장 긴 바이토닉 부분 수열

[백준 11054번: 가장 긴 바이토닉 부분 수열](https://www.acmicpc.net/problem/11054)

## 문제 파악하기

수열에서 **바이토닉 부분 수열**의 최대 길이를 구하는 문제입니다.

### 바이토닉 수열이란?

증가하다가 감소하는 수열입니다.

```
S1 < S2 < ... < Sk > Sk+1 > ... > Sn
```

예: [1, 2, 3, 2, 1], [1, 5, 2], [10, 9, 8]

> [!NOTE]
> 바이토닉 수열은 **LIS(증가 부분 수열)** + **LDS(감소 부분 수열)** 의 조합입니다!
> 어떤 원소를 기준으로 왼쪽은 증가, 오른쪽은 감소하는 형태입니다.

## 풀이

**DP (동적 프로그래밍)** 로 해결합니다.

### 핵심 아이디어

각 위치 i를 꼭짓점으로 하는 바이토닉 수열의 길이를 구합니다.

```
바이토닉 길이(i) = 왼쪽 증가 길이 + 오른쪽 감소 길이 - 1
```

(-1은 i번째 원소가 중복 계산되므로)

### 1. 왼쪽에서 오른쪽 LIS (증가 부분 수열)

```javascript
const iDp = Array(N).fill(1);

for (let i = 0; i < N; i++) {
  for (let j = 0; j < i; j++) {
    if (nums[i] > nums[j]) {
      iDp[i] = Math.max(iDp[i], iDp[j] + 1);
    }
  }
}
```

`iDp[i]`: i번째 원소를 마지막으로 하는 LIS 길이

### 2. 오른쪽에서 왼쪽 LIS (= LDS)

```javascript
const dDp = Array(N).fill(1);

for (let i = N - 1; i >= 0; i--) {
  for (let j = i + 1; j < N; j++) {
    if (nums[i] > nums[j]) {
      dDp[i] = Math.max(dDp[i], dDp[j] + 1);
    }
  }
}
```

`dDp[i]`: i번째 원소를 시작으로 하는 LDS 길이

> [!TIP]
> 오른쪽에서 왼쪽으로 LIS를 구하면 자연스럽게 LDS가 됩니다!
> i에서 시작해서 오른쪽으로 감소하는 가장 긴 수열 = i를 시작으로 하는 LDS

### 3. 각 위치에서 바이토닉 길이 계산

```javascript
let max = 0;
for (let i = 0; i < N; i++) {
  max = Math.max(max, iDp[i] + dDp[i] - 1);
}
console.log(max);
```

## 동작 예시

```
수열: [1, 5, 2, 1, 4, 3, 4, 5, 2, 1]

iDp: [1, 2, 2, 1, 3, 3, 4, 5, 2, 1]
     └ i번째까지 증가하는 LIS 길이

dDp: [1, 5, 4, 3, 4, 3, 3, 3, 2, 1]
     └ i번째부터 감소하는 LDS 길이

합계 (iDp + dDp - 1):
     [1, 6, 5, 3, 6, 5, 6, 7, 3, 1]

최댓값: 7 (인덱스 7: ...4, 5, 2, 1)
```

## 핵심 정리

| DP 배열 | 의미                             | 방향          |
| ------- | -------------------------------- | ------------- |
| iDp[i]  | i를 끝으로 하는 증가 수열 길이   | 왼쪽 → 오른쪽 |
| dDp[i]  | i를 시작으로 하는 감소 수열 길이 | 오른쪽 → 왼쪽 |

### 시간 복잡도

- LIS 계산: O(N²)
- LDS 계산: O(N²)
- 총 **O(N²)**
