# 미세먼지 안녕!

[백준 17144번: 미세먼지 안녕!](https://www.acmicpc.net/problem/17144)

## 문제 파악하기

미세먼지가 확산되고 공기청정기가 작동하는 과정을 T초 동안 시뮬레이션하여 **남은 미세먼지 총량**을 구하는 문제입니다.

### 규칙

1. **미세먼지 확산**: 인접한 4방향으로 현재량/5씩 확산 (동시에)
2. **공기청정기**: 위쪽은 반시계, 아래쪽은 시계 방향으로 바람 순환
3. 공기청정기로 들어간 미세먼지는 정화됨

> [!NOTE] > **시뮬레이션** 문제입니다. 확산과 순환을 정확히 구현하는 것이 핵심!

## 풀이

### 1. 공기청정기 위치 찾기

```javascript
let upPos = [];
let downPos = [];

for (let i = 0; i < R; i++) {
  for (let j = 0; j < C; j++) {
    if (board[i][j] === -1) {
      if (upPos.length === 0) {
        upPos = [i, j];
      } else {
        downPos = [i, j];
      }
    }
  }
}
```

### 2. 미세먼지 확산

```javascript
const getS = (x, y) => {
  let isD = 0;
  const r = Math.floor(board[x][y] / 5);
  for (let z = 0; z < dirs.length; z++) {
    const [dx, dy] = dirs[z];
    const nx = x + dx;
    const ny = y + dy;
    if (nx < 0 || ny < 0 || nx >= R || ny >= C) continue;
    if (board[nx][ny] === -1) continue;
    temp[nx][ny] += r;
    isD++;
  }
  temp[x][y] += isD * r === 0 ? 0 : isD * r * -1;
};
```

- 확산량: `board[x][y] / 5` (소수점 버림)
- 실제 확산된 방향 수(isD)만큼 원래 칸에서 감소
- **temp 배열**: 동시 확산을 위해 변화량만 저장

### 3. 공기청정기 작동

```javascript
const work = () => {
  // 위쪽 구역 (반시계 방향)
  // 왼쪽 열: 아래 → 위
  for (let i = upPos[0] - 1; i >= 1; i--) {
    board[i][0] = board[i - 1][0];
  }
  // 위쪽 행: 왼쪽 ← 오른쪽
  for (let i = 0; i < C - 1; i++) {
    board[0][i] = board[0][i + 1];
  }
  // 오른쪽 열: 위 → 아래
  for (let i = 0; i < upPos[0]; i++) {
    board[i][C - 1] = board[i + 1][C - 1];
  }
  // 공기청정기 행: 오른쪽 ← 왼쪽
  for (let i = C - 1; i >= 2; i--) {
    board[upPos[0]][i] = board[upPos[0]][i - 1];
  }
  board[upPos[0]][1] = 0; // 공기청정기에서 나온 바람

  // 아래쪽 구역 (시계 방향) - 유사한 로직
  // ...
};
```

> [!TIP] > **바람 순환 순서**
>
> - 밀려나는 방향의 **끝에서부터** 당겨와야 덮어쓰기 문제 없음
> - 공기청정기 바로 옆 칸은 0으로 설정 (깨끗한 바람)

## 순환 방향 시각화

```
위쪽 구역 (반시계):       아래쪽 구역 (시계):
← ← ← ← ←                ↓ → → → →
↓         ↑              ↓         ↑
↓  [공기]  ↑              [공기]    ↑
→ → → → →                ← ← ← ← ←
```

## 핵심 정리

| 단계        | 동작            | 주의점                  |
| ----------- | --------------- | ----------------------- |
| 확산        | 4방향 동시 확산 | temp 배열로 동시성 보장 |
| 확산량      | 현재량 / 5      | 소수점 버림             |
| 순환 (위)   | 반시계 방향     | 끝에서부터 당기기       |
| 순환 (아래) | 시계 방향       | 공기청정기 옆은 0       |

### 시간 복잡도

- 매 초마다 O(R × C) 탐색
- T초 동안 반복
- **O(T × R × C)**
